<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nzuri Café — Luxury Campus Ordering</title>
  <meta name="description" content="Nzuri Café at Ekhaya Junction (TUT). Luxury cart with WhatsApp checkout for Kotas, Chips, Fish, and Sandwiches." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2238%22 fill=%22%23c8a96a%22/></svg>">
  <style>
    :root{
      --bg:#0f1115; --card:#151821; --soft:#1b1f2a; --deep:#0b0d12;
      --gold:#c8a96a; --text:#e8ecf1; --muted:#a8b0bd;
      --danger:#b94a4a; --wa-green:#25D366;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    a{color:inherit;text-decoration:none}

    /* Sticky header that compacts on scroll */
    header.nav{
      position:sticky;top:0;z-index:100;background:var(--bg);
      display:flex;justify-content:space-between;align-items:center;
      padding:14px 20px;transition:all .18s ease;
      border-bottom:1px solid rgba(200,169,106,0.12);
      backdrop-filter:saturate(1.2) blur(6px);
    }
    header.nav.compact{padding:8px 16px;box-shadow:0 2px 12px rgba(0,0,0,0.45)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:42px;height:42px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #e4d2a4, var(--gold) 35%, #4b3d23 70%, #2a2317);
      box-shadow: 0 0 0 2px rgba(200,169,106,0.35), 0 10px 30px rgba(0,0,0,0.4);
      transition:transform .2s ease;
    }
    header.nav.compact .logo{transform:scale(0.9)}
    .title{font-weight:800;letter-spacing:0.3px}
    .tag{color:var(--muted);font-size:13px}
    .cta-bar{position:relative;display:flex;gap:10px;align-items:center}
    .cta{
      padding:10px 16px;border:1px solid rgba(200,169,106,0.35);
      border-radius:999px;background:linear-gradient(180deg,#1f232c,var(--soft));
      font-weight:600;color:var(--text);position:relative
    }
    .cta.primary{background:linear-gradient(180deg,#2a2f3a,#1c2029);border-color:var(--gold)}
    .cart-badge{
      background:var(--gold);color:#111;font-weight:800;
      border-radius:999px;padding:2px 8px;margin-left:6px;font-size:12px;
      display:inline-block;min-width:20px;text-align:center
    }
    .cart-badge.bump{animation:bump .25s ease}
    @keyframes bump{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}

    /* Category tabs under header */
    nav.categories{
      position:sticky;top:66px;z-index:95;
      display:flex;gap:12px;justify-content:center;
      background:var(--bg);padding:10px 16px;
      border-bottom:1px solid rgba(200,169,106,0.12);
      transition:top .18s ease, padding .18s ease;
    }
    header.nav.compact + nav.categories{top:56px;padding:8px 12px}
    nav.categories a{
      padding:8px 16px;border-radius:999px;
      background:linear-gradient(180deg,#1f232c,var(--soft));
      border:1px solid rgba(200,169,106,0.3);
      font-weight:600;color:var(--text);transition:all .2s ease
    }
    nav.categories a.active,nav.categories a:hover{background:var(--gold);color:#111}

    /* Cart preview dropdown */
    .cart-preview {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: #1a1e27;
      border: 1px solid rgba(200,169,106,0.3);
      border-radius: 10px;
      padding: 10px;
      min-width: 220px;
      display: none;
      font-size: 13px;
      z-index: 200;
      box-shadow:0 12px 30px rgba(0,0,0,0.5);
    }
    .cta.primary:hover .cart-preview { display: block; }

    /* Layout */
    main.container{max-width:1100px;margin:0 auto;padding:26px}
    .hero{display:grid;grid-template-columns:1.1fr 0.9fr;gap:22px;padding:26px 0}
    .panel{
      background:linear-gradient(180deg,var(--card),var(--soft));
      border:1px solid rgba(200,169,106,0.18);
      border-radius:18px;padding:22px;
      box-shadow:0 20px 50px rgba(0,0,0,0.45);
    }
    .headline{font-size:28px;font-weight:800;line-height:1.2;margin:0 0 8px}
    .sub{color:var(--muted);margin:0 0 16px}
    .notes{display:flex;gap:12px;flex-wrap:wrap}
    .pill{font-size:13px;color:#d9e1ea;background:#1a1e27;border:1px solid rgba(255,255,255,0.06);border-radius:999px;padding:6px 10px}
    .wa-btn{
      display:inline-flex;align-items:center;gap:8px;
      background:var(--wa-green);color:#0b2c13;font-weight:800;
      padding:12px 16px;border:none;border-radius:12px;cursor:pointer;text-decoration:none;
      box-shadow:0 8px 24px rgba(37,211,102,0.25)
    }
    .divider{height:1px;background:linear-gradient(90deg, rgba(200,169,106,0), rgba(200,169,106,0.35), rgba(200,169,106,0));margin:24px 0}

    .section-wrap{display:grid;grid-template-columns:1fr 380px;gap:22px}
    @media (max-width:1000px){.section-wrap{grid-template-columns:1fr}}

    .section-title{font-size:20px;font-weight:800;margin:18px 0 8px}
    .menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:18px}

    /* Cards */
    .card{
      display:flex;flex-direction:column;justify-content:flex-start;
      background:linear-gradient(180deg,#151821,#101318);
      border:1px solid rgba(200,169,106,0.14);border-radius:14px;padding:16px;min-height:190px
    }
    .card img{width:100%;border-radius:10px;margin-bottom:10px}
    .card h4{margin:0;font-size:16px;font-weight:800}
    .desc{color:var(--muted);font-size:13px;margin:6px 0 10px}
    .price{font-weight:800;color:var(--gold)}

    .qty-controls{display:flex;align-items:center;gap:8px;margin-top:12px}
    .btn{padding:8px 12px;border:none;border-radius:10px;cursor:pointer;font-weight:800}
    .btn-add{background:linear-gradient(180deg,#e9d9b0,var(--gold));color:#111}
    .btn-sub{background:linear-gradient(180deg,#8b2f2f,var(--danger));color:#fff}
    .qty-display{min-width:28px;text-align:center;font-weight:800}

    .add-btn{
      margin-top:10px;padding:8px 12px;border:none;border-radius:999px;
      background:linear-gradient(180deg,#e9d9b0,var(--gold));color:#111;
      font-weight:800;cursor:pointer;display:none
    }

    .options{margin-top:10px;display:none}
    .option-group{margin:8px 0}
    .option-label{font-size:12px;color:var(--muted);margin-bottom:6px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{
      padding:7px 12px;border-radius:999px;background:#1a1e27;
      border:1px solid rgba(200,169,106,0.28);cursor:pointer;font-size:13px;
      transition:all .15s ease;
    }
    .chip:hover{border-color:rgba(200,169,106,0.45)}
    .chip.active{background:var(--gold);color:#111;font-weight:800;border-color:var(--gold);box-shadow:0 6px 18px rgba(200,169,106,0.25)}

    /* Fly-to-cart animation clone */
    .fly-img {
      position: fixed;
      width: 80px;
      height: auto;
      border-radius: 8px;
      z-index: 9999;
      pointer-events: none;
      transition: transform 0.8s cubic-bezier(0.55, 0.06, 0.68, 0.19), opacity 0.8s;
    }

    /* Cart (fixed checkout always inline) */
    aside.cart{
      position: static;
      background:linear-gradient(180deg,var(--card),var(--deep));
      border:1px solid rgba(200,169,106,0.25);border-radius:18px;padding:16px;
      box-shadow:0 20px 50px rgba(0,0,0,0.45);
      margin-top: 20px;
    }
    .cart h3{margin:0 0 10px;font-size:18px;font-weight:800}
    .order-meta{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:var(--muted);margin-bottom:10px}
    .cart-items{margin:10px 0}
    .cart-item{
      display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;
      padding:8px;border-radius:10px;background:#1a1e27;border:1px solid rgba(255,255,255,0.06);margin-bottom:8px
    }
    .variant{font-size:12px;color:var(--muted)}
    .line-total{font-weight:800;color:var(--gold)}
    .remove-one{background:linear-gradient(180deg,#8b2f2f,var(--danger));color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;font-weight:800}
    .remove-all{background:linear-gradient(180deg,#3a3f4a,#232834);color:#e8ecf1;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;font-weight:800}

    .summary{margin-top:12px;font-size:14px}
    .summary-row{display:flex;justify-content:space-between;margin:4px 0}
    .summary-total{font-size:16px;font-weight:800}
    .input-field{margin:8px 0}
    .input-field input{padding:10px;width:100%;border-radius:10px;border:1px solid #333;background:#1a1e27;color:var(--text)}

    /* Delivery toggle + times */
    .delivery-toggle{display:flex;gap:10px;margin:10px 0}
    .toggle-option{
      flex:1;text-align:center;padding:10px;border-radius:999px;
      border:1px solid rgba(200,169,106,0.3);cursor:pointer;user-select:none;
      background:linear-gradient(180deg,#1f232c,var(--soft));color:var(--text);font-weight:700;transition:all .15s ease;
    }
    .toggle-option small{display:block;font-size:12px;color:var(--muted);margin-top:2px}
    .toggle-option.active{background:linear-gradient(180deg,#e9d9b0,var(--gold));color:#111;border-color:var(--gold);box-shadow:0 6px 18px rgba(200,169,106,0.25)}
    .toggle-option.active small{color:#111}

    /* Checkout buttons */
    .checkout-btn{
      margin-top:12px;padding:12px;width:100%;
      background: linear-gradient(270deg, #33e27a, #25D366, #33e27a);
      background-size: 600% 600%;
      animation: gradientShift 6s ease infinite;
      color:#092611;font-weight:800;border:none;border-radius:12px;cursor:pointer;
      box-shadow:0 12px 30px rgba(37,211,102,0.25);
      transition: all 0.25s ease;
    }
    .checkout-btn:disabled{
      background:linear-gradient(180deg,#3b4a3f,#2a332b);
      color:#9fb2a3; cursor:not-allowed; box-shadow:none;
      animation: none;
    }

    .clear-btn{
      margin-top:8px;padding:10px;width:100%;
      background:linear-gradient(180deg,#9e3b3b,var(--danger));
      color:#fff;font-weight:800;border:none;border-radius:12px;cursor:pointer;
      transition: all 0.25s ease;
    }

    /* Footer with hover contact */
    footer.footer{
      margin-top:40px;
      padding:20px;
      text-align:center;
      background:linear-gradient(180deg,var(--card),var(--deep));
      border-top:1px solid rgba(200,169,106,0.25);
      font-size:14px;
      color:var(--muted);
      position:relative;
    }
    .footer-text{display:inline-block;position:relative;cursor:default}
    .footer .contact{
      opacity:0;visibility:hidden;position:absolute;
      left:50%;transform:translateX(-50%);bottom:120%;
      background:#1a1e27;color:var(--text);padding:6px 12px;border-radius:8px;
      border:1px solid rgba(200,169,106,0.3);font-size:13px;white-space:nowrap;
      transition:opacity .2s ease, visibility .2s ease;
    }
    .footer-text:hover .contact{opacity:1;visibility:visible}
    .footer .contact::after{
      content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);
      border-width:6px;border-style:solid;border-color:#1a1e27 transparent transparent transparent;
    }

    /* CLEAR CART MODAL */
    .modal {
      position: fixed; top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.6);
      display: flex; align-items: center; justify-content: center;
      visibility: hidden; opacity: 0; transition: opacity .2s;
      z-index: 1000;
    }
    .modal[aria-hidden="false"] { visibility: visible; opacity: 1; }
    .modal-content {
      background: #151821; padding: 20px; border-radius: 12px;
      border: 1px solid rgba(200,169,106,0.3);
      text-align: center; max-width: 340px;
    }
    .modal-actions{display:flex;gap:10px;justify-content:center;margin-top:12px}
    .modal-actions button{padding:10px 14px;border:none;border-radius:10px;font-weight:800;cursor:pointer}
    .modal .confirm{background:linear-gradient(180deg,#9e3b3b,var(--danger));color:#fff}
    .modal .cancel{background:linear-gradient(180deg,#2a2f3a,#1c2029);color:#e8ecf1;border:1px solid rgba(200,169,106,0.25)}

    /* RESPONSIVE (no fixed cart override on mobile) */
    @media (max-width: 768px) {
      nav.categories { overflow-x: auto; white-space: nowrap; }
      nav.categories a { flex: 0 0 auto; }
      .hero{grid-template-columns:1fr}
      /* Keep cart inline on mobile */
    }

    /* Floating cart toggle + polish */
    .floating-cart-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--gold);
      color: #111;
      font-weight: 800;
      padding: 12px 18px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      z-index: 1200;
      transition: opacity .2s ease, transform .2s ease;
    }
    .floating-cart-toggle.hidden {
      opacity: 0;
      pointer-events: none;
      transform: translateY(20px);
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(200,169,106,0.7); }
      70% { box-shadow: 0 0 0 12px rgba(200,169,106,0); }
      100% { box-shadow: 0 0 0 0 rgba(200,169,106,0); }
    }
    .floating-cart-toggle.pulse { animation: pulse 1.5s infinite; }

    /* Floating cart panel (expandable on demand) */
    .floating-cart-panel {
      position: fixed;
      bottom: 0;
      left: 0; right: 0;
      max-height: 70%;
      background: linear-gradient(180deg,var(--card),var(--deep));
      border-top: 2px solid var(--gold);
      box-shadow: 0 -8px 24px rgba(0,0,0,0.5);
      transform: translateY(100%);
      transition: transform .3s ease;
      z-index: 1300;
      overflow-y: auto;
      padding: 16px;
      border-radius: 18px 18px 0 0;
    }
    .floating-cart-panel.expanded {
      transform: translateY(0);
      animation: slideUp 0.4s ease-out;
    }
    @keyframes slideUp {
      0% { transform: translateY(100%); }
      80% { transform: translateY(-5%); }
      100% { transform: translateY(0); }
    }
    .floating-cart-panel .close-cart-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: var(--danger);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 20px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Cart item hover polish */
    .cart-item:hover {
      background: #20242f;
      box-shadow: 0 0 10px rgba(200,169,106,0.3);
      transform: scale(1.01);
      transition: all 0.2s ease;
    }

    /* Animated gradient for checkout button */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Category hover glow */
    nav.categories a:hover { box-shadow: 0 0 10px rgba(200,169,106,0.5); transform: translateY(-2px); }
    nav.categories a.active { box-shadow: 0 0 14px rgba(200,169,106,0.7); }

    /* Button hover glow */
    button.checkout-btn:hover,
    button.clear-btn:hover,
    .btn-add:hover,
    .btn-sub:hover,
    .add-btn:hover {
      box-shadow: 0 0 12px rgba(200,169,106,0.6), 0 0 24px rgba(200,169,106,0.4);
      transform: translateY(-2px);
    }

    /* Chip active glow */
    .chip.active { box-shadow: 0 0 8px rgba(200,169,106,0.6); transform: scale(1.05); }
  </style>
</head>
<body>
  <!-- Sticky header -->
  <header class="nav" id="app-header" aria-label="Nzuri Café navigation">
    <div class="brand" aria-label="Brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title">Nzuri Café</div>
        <div class="tag">Premium campus canteen • Ekhaya Junction (TUT)</div>
      </div>
    </div>
    <div class="cta-bar">
      <a class="cta" href="#menu" aria-label="View menu">View menu</a>
      <a class="cta primary" href="#cart" aria-label="View cart and checkout">
        View cart <span id="cart-count" class="cart-badge" aria-live="polite">0</span>
        <div id="cart-preview" class="cart-preview" role="tooltip" aria-hidden="true"></div>
      </a>
    </div>
  </header>

  <!-- Category tabs -->
  <nav class="categories" id="cat-bar" aria-label="Menu categories">
    <a href="#kotas">Kotas</a>
    <a href="#chips">Chips</a>
    <a href="#fish">Fish</a>
    <a href="#sandwiches">Sandwiches</a>
    <a href="#extras">Extras</a>
  </nav>

  <!-- Hero -->
  <main class="container" role="main">
    <section class="hero" id="hero" aria-label="Introduction and ordering details">
      <div class="panel">
        <h1 class="headline">Luxury taste, campus convenience.</h1>
        <p class="sub">Kotas, Chips, Fish & Sandwiches—crafted fresh at Ekhaya Junction Residence, TUT Campus. Build cart, choose collection or delivery to Ekhaya (R7), and finalize on WhatsApp.</p>
        <div class="notes" aria-label="Highlights">
          <div class="pill">Open daily: 08:00–21:00</div>
          <div class="pill">Collection at Nzuri Café (Ekhaya Junction)</div>
          <div class="pill">Delivery: Ekhaya Junction rooms only (R7)</div>
          <div class="pill">WhatsApp-first checkout</div>
        </div>
      </div>
      <div class="panel" style="background:linear-gradient(180deg,#17321d,#132818);" aria-label="WhatsApp ordering">
        <h2 class="headline" style="font-size:22px">Order via cart + WhatsApp</h2>
        <p class="sub">Use +/– to set quantity. Choose seasonings/sauces. Add variants to cart. Checkout sends a prefilled WhatsApp message.</p>
        <a class="wa-btn" href="https://wa.me/27790717794?text=Hello%20Nzuri%20Caf%C3%A9%2C%20I%27m%20ready%20to%20order." aria-label="Message Nzuri Café on WhatsApp">WhatsApp: 079 071 7794</a>
        <div class="notes">
          <div class="pill">Order ID: nzuri-YYYYMMDD-###</div>
        </div>
      </div>
    </section>

    <div id="menu" class="divider" aria-hidden="true"></div>

    <!-- Menu + Fixed Cart -->
    <section class="section-wrap" aria-label="Menu and cart">
      <div>
        <!-- Kotas -->
        <section id="kotas" aria-label="Kotas">
          <h3 class="section-title">Kotas</h3>
          <div class="menu" role="list">
            <!-- Repeatable Kota cards -->
            <article class="card" data-item="Kota — Chips & French" data-price="18" role="listitem">
              <img src="images/kota1.jpg" alt="Kota — Chips & French">
              <div><h4>Kota — Chips & French</h4><p class="desc">Classic kota with golden chips and french polony.</p><div class="price">R18</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French & Half Russian" data-price="23" role="listitem">
              <img src="images/kota2.jpg" alt="Kota — Chips, French & Half Russian">
              <div><h4>Kota — Chips, French & Half Russian</h4><p class="desc">Hearty kota packed with chips, french polony, and half a Russian.</p><div class="price">R23</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French & Vienna" data-price="23" role="listitem">
              <img src="images/kota3.jpg" alt="Kota — Chips, French & Vienna">
              <div><h4>Kota — Chips, French & Vienna</h4><p class="desc">Crispy chips and french polony paired with a tender Vienna.</p><div class="price">R23</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna & Half Russian" data-price="28" role="listitem">
              <img src="images/kota4.jpg" alt="Kota — Chips, French, Vienna & Half Russian">
              <div><h4>Kota — Chips, French, Vienna & Half Russian</h4><p class="desc">Deluxe stack of chips, french polony, Vienna, and half a Russian.</p><div class="price">R28</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, Vienna & Cheese" data-price="26" role="listitem">
              <img src="images/kota5.jpg" alt="Kota — Chips, Vienna & Cheese">
              <div><h4>Kota — Chips, Vienna & Cheese</h4><p class="desc">Vienna sausage and melted cheese layered over golden chips.</p><div class="price">R26</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French & Full Russian" data-price="26" role="listitem">
              <img src="images/kota6.jpg" alt="Kota — Chips, French & Full Russian">
              <div><h4>Kota — Chips, French & Full Russian</h4><p class="desc">Classic kota with chips, french polony, and a full Russian.</p><div class="price">R26</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna, Cheese & Egg" data-price="29" role="listitem">
              <img src="images/kota7.jpg" alt="Kota — Chips, French, Vienna, Cheese & Egg">
              <div><h4>Kota — Chips, French, Vienna, Cheese & Egg</h4><p class="desc">Rich kota with chips, french polony, Vienna, cheese, and egg.</p><div class="price">R29</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna, Cheese, Egg & Half Russian" data-price="33" role="listitem">
              <img src="images/kota8.jpg" alt="Kota — Chips, French, Vienna, Cheese, Egg & Half Russian">
              <div><h4>Kota — Chips, French, Vienna, Cheese, Egg & Half Russian</h4><p class="desc">Ultimate combo with chips, french polony, Vienna, cheese, egg, and half a Russian.</p><div class="price">R33</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna & Full Russian" data-price="30" role="listitem">
              <img src="images/kota9.jpg" alt="Kota — Chips, French, Vienna & Full Russian">
              <div><h4>Kota — Chips, French, Vienna & Full Russian</h4><p class="desc">Loaded kota with chips, french polony, Vienna, and full Russian.</p><div class="price">R30</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna, Cheese & Full Russian" data-price="34" role="listitem">
              <img src="images/kota10.jpg" alt="Kota — Chips, French, Vienna, Cheese & Full Russian">
              <div><h4>Kota — Chips, French, Vienna, Cheese & Full Russian</h4><p class="desc">Cheesy indulgence with chips, french polony, Vienna, and full Russian.</p><div class="price">R34</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Kota — Chips, French, Vienna, Cheese, Full Russian & Egg" data-price="36" role="listitem">
              <img src="images/kota11.jpg" alt="Kota — Chips, French, Vienna, Cheese, Full Russian & Egg">
              <div><h4>Kota — Chips, French, Vienna, Cheese, Full Russian & Egg</h4><p class="desc">Most indulgent: chips, french polony, Vienna, cheese, full Russian, and egg.</p><div class="price">R36</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>
          </div>
        </section>

        <!-- Chips -->
        <section id="chips" aria-label="Chips">
          <h3 class="section-title">Chips</h3>
          <div class="menu" role="list">
            <article class="card" data-item="Small Chips" data-price="25" role="listitem">
              <img src="images/chips1.jpg" alt="Small chips">
              <div><h4>Small Chips</h4><p class="desc">Crispy golden fries, perfect for a light snack.</p><div class="price">R25</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Medium Chips" data-price="30" role="listitem">
              <img src="images/chips2.jpg" alt="Medium chips">
              <div><h4>Medium Chips</h4><p class="desc">A generous portion of golden fries to share or enjoy solo.</p><div class="price">R30</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Large Chips" data-price="40" role="listitem">
              <img src="images/chips3.jpg" alt="Large chips">
              <div><h4>Large Chips</h4><p class="desc">A feast of golden fries, perfect for groups or big appetites.</p><div class="price">R40</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>
          </div>
        </section>

        <!-- Fish -->
        <section id="fish" aria-label="Fish">
          <h3 class="section-title">Fish</h3>
          <div class="menu" role="list">
            <article class="card" data-item="Fish" data-price="30" role="listitem">
              <img src="images/fish1.jpg" alt="Fish">
              <div><h4>Fish</h4><p class="desc">Freshly fried fish fillet, seasoned to perfection.</p><div class="price">R30</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Fish seasoning</div>
                  <div class="chips" data-type="fish-seasoning"><div class="chip">Salt</div><div class="chip">Vinegar</div><div class="chip">Lime Slice</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Fish & Chips" data-price="55" role="listitem">
              <img src="images/fish2.jpg" alt="Fish and chips">
              <div><h4>Fish & Chips</h4><p class="desc">Golden fried fish paired with a hearty portion of chips.</p><div class="price">R55</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <div class="options">
                <div class="option-group"><div class="option-label">Fish seasoning</div>
                  <div class="chips" data-type="fish-seasoning"><div class="chip">Salt</div><div class="chip">Vinegar</div><div class="chip">Lime Slice</div></div>
                </div>
                <div class="option-group"><div class="option-label">Chips seasoning</div>
                  <div class="chips" data-type="seasoning"><div class="chip">Salt</div><div class="chip">Spice</div><div class="chip">Vinegar</div></div>
                </div>
                <div class="option-group"><div class="option-label">Sauce</div>
                  <div class="chips" data-type="sauce"><div class="chip">Tomato</div><div class="chip">BBQ</div><div class="chip">Hot Sauce</div><div class="chip">Chip Dip</div></div>
                </div>
              </div>
              <button class="add-btn">Add to cart</button>
            </article>
          </div>
        </section>

        <!-- Sandwiches -->
        <section id="sandwiches" aria-label="Sandwiches">
          <h3 class="section-title">Sandwiches</h3>
          <div class="menu" role="list">
            <article class="card" data-item="Sandwich — Cheese & Tomato" data-price="18" role="listitem">
              <img src="images/sandwich1.jpg" alt="Cheese & Tomato sandwich">
              <div><h4>Cheese & Tomato</h4><p class="desc">Classic toasted sandwich with melted cheese and fresh tomato.</p><div class="price">R18</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Sandwich — Cheese, Egg & Tomato" data-price="23" role="listitem">
              <img src="images/sandwich2.jpg" alt="Cheese, Egg & Tomato sandwich">
              <div><h4>Cheese, Egg & Tomato</h4><p class="desc">A hearty toastie with cheese, fried egg, and tomato.</p><div class="price">R23</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Sandwich — Cheese & Bacon" data-price="26" role="listitem">
              <img src="images/sandwich3.jpg" alt="Cheese & Bacon sandwich">
              <div><h4>Cheese & Bacon</h4><p class="desc">Smoky bacon and melted cheese in a toasted sandwich.</p><div class="price">R26</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Sandwich — Cheese, Bacon & Egg" data-price="32" role="listitem">
              <img src="images/sandwich4.jpg" alt="Cheese, Bacon & Egg sandwich">
              <div><h4>Cheese, Bacon & Egg</h4><p class="desc">A breakfast favorite with bacon, cheese, and egg.</p><div class="price">R32</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Sandwich — Chicken & Mayo" data-price="30" role="listitem">
              <img src="images/sandwich5.jpg" alt="Chicken & Mayo sandwich">
              <div><h4>Chicken & Mayo</h4><p class="desc">Tender chicken mixed with creamy mayo in toasted bread.</p><div class="price">R30</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>

            <article class="card" data-item="Sandwich — Dagwood" data-price="55" role="listitem">
              <img src="images/sandwich6.jpg" alt="Dagwood sandwich">
              <div><h4>Dagwood</h4><p class="desc">The ultimate stacked sandwich with layers of meat, cheese, and egg.</p><div class="price">R55</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>
          </div>
        </section>

        <!-- Extras -->
        <section id="extras" aria-label="Extras">
          <h3 class="section-title">Extras</h3>
          <div class="menu" role="list">
            <article class="card" data-item="Extra — Russian" data-price="15" role="listitem">
              <img src="images/extra1.jpg" alt="Russian extra">
              <div><h4>Russian (extra)</h4><p class="desc">Add a juicy Russian sausage to any meal.</p><div class="price">R15</div></div>
              <div class="qty-controls"><button class="btn btn-sub">−</button><div class="qty-display">0</div><button class="btn btn-add">+</button></div>
              <button class="add-btn">Add to cart</button>
            </article>
          </div>
        </section>
      </div>

      <!-- Fixed Checkout (always inline) -->
      <aside id="cart" class="cart" aria-label="Your cart and checkout">
        <div class="order-meta" aria-label="Order metadata">
          <div>Order ID: <span id="order-number"></span></div>
          <div><span id="live-time"></span></div>
        </div>

        <h3>Your Cart</h3>
        <div id="cart-items" class="cart-items"></div>

        <div class="summary" aria-label="Order summary">
          <div class="summary-row"><span>Subtotal</span><span>R<span id="subtotal">0</span></span></div>

          <div class="delivery-toggle" id="delivery-toggle" role="group" aria-label="Choose delivery or collection">
            <div class="toggle-option active" data-mode="collection" aria-label="Collection">
              Collection at Nzuri Café — Free
              <small>11:00–20:30</small>
            </div>
            <div class="toggle-option" data-mode="delivery" aria-label="Delivery">
              Delivery to Ekhaya Junction — R7
              <small>15:00–20:30</small>
            </div>
          </div>

          <div id="room-field" class="input-field" style="display:none;">
            <input type="text" id="room" placeholder="Ekhaya Junction room number (e.g., Block A, Room 42)" aria-label="Room number for delivery" />
          </div>

          <div class="input-field">
            <input type="text" id="name" placeholder="Your name" aria-label="Your name" />
          </div>

          <div class="input-field">
            <input type="tel" id="phone" placeholder="Your phone number" aria-label="Your phone number" />
          </div>

          <div class="input-field">
            <input type="number" id="tip" min="0" step="1" placeholder="Tip amount (optional)" aria-label="Tip amount" />
          </div>

          <div class="summary-row"><span>Delivery fee</span><span>R<span id="delivery-fee">0</span></span></div>
          <div class="summary-row summary-total"><span>Total</span><span>R<span id="total">0</span></span></div>
        </div>

        <button class="checkout-btn" onclick="checkout()" aria-label="Order via WhatsApp">Order via WhatsApp</button>
        <button class="clear-btn" onclick="openClearModal()" aria-label="Clear cart">Clear cart</button>
      </aside>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer" aria-label="Footer">
    <div class="footer-text">
      Nzuri Café • <span class="author">Made by DrMcGi</span>
      <span class="contact">064 921 1745 • giftk.rantho@gmail.com</span>
    </div>
  </footer>

  <!-- Clear cart confirmation modal -->
  <div id="clear-modal" class="modal" aria-hidden="true" role="dialog" aria-label="Confirm clear cart">
    <div class="modal-content">
      <p>Are you sure you want to clear your cart?</p>
      <div class="modal-actions">
        <button id="confirm-clear" class="confirm" aria-label="Confirm clear">Yes, clear</button>
        <button id="cancel-clear" class="cancel" aria-label="Cancel clear">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Floating Cart Toggle -->
  <div id="floating-cart-toggle" class="floating-cart-toggle" aria-label="Open floating checkout">
    🛒 Checkout
  </div>

  <!-- Floating Cart Panel (duplicate checkout, expandable anywhere) -->
  <div id="floating-cart-panel" class="floating-cart-panel" aria-label="Floating checkout">
    <button id="close-floating-cart" class="close-cart-btn" aria-label="Close floating checkout">×</button>
    <h3>Your Cart</h3>
    <div id="floating-cart-items" class="cart-items"></div>

    <!-- Mirror checkout fields in floating panel -->
    <div class="summary" aria-label="Floating order summary">
      <div class="summary-row"><span>Subtotal</span><span>R<span id="floating-subtotal">0</span></span></div>

      <div class="delivery-toggle" id="floating-delivery-toggle" role="group" aria-label="Choose delivery or collection (floating)">
        <div class="toggle-option active" data-mode="collection" aria-label="Collection">
          Collection at Nzuri Café — Free
          <small>11:00–20:30</small>
        </div>
        <div class="toggle-option" data-mode="delivery" aria-label="Delivery">
          Delivery to Ekhaya Junction — R7
          <small>15:00–20:30</small>
        </div>
      </div>

      <div id="floating-room-field" class="input-field" style="display:none;">
        <input type="text" id="floating-room" placeholder="Ekhaya Junction room number (e.g., Block A, Room 42)" aria-label="Room number for delivery (floating)" />
      </div>

      <div class="input-field">
        <input type="text" id="floating-name" placeholder="Your name" aria-label="Your name (floating)" />
      </div>

      <div class="input-field">
        <input type="tel" id="floating-phone" placeholder="Your phone number" aria-label="Your phone number (floating)" />
      </div>

      <div class="input-field">
        <input type="number" id="floating-tip" min="0" step="1" placeholder="Tip amount (optional)" aria-label="Tip amount (floating)" />
      </div>

      <div class="summary-row"><span>Delivery fee</span><span>R<span id="floating-delivery-fee">0</span></span></div>
      <div class="summary-row summary-total"><span>Total</span><span>R<span id="floating-total">0</span></span></div>
    </div>

    <button class="checkout-btn" onclick="checkout()" aria-label="Order via WhatsApp (floating)">Order via WhatsApp</button>
  </div>

  <script>
    const WHATSAPP_NUMBER = '27790717794';
    const DELIVERY_FEE = 7;

    let cart = [];
    let deliveryMode = 'collection';

    // Utility: today stamp
    function todayStamp(){
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      return `${yyyy}${mm}${dd}`;
    }
    const pad2 = n => String(n).padStart(2,'0');

    // Live time
    function updateLiveTime(){
      const d = new Date();
      const h = pad2(d.getHours());
      const m = pad2(d.getMinutes());
      const s = pad2(d.getSeconds());
      const el = document.getElementById('live-time');
      if(el) el.textContent = `${h}:${m}:${s}`;
    }
    setInterval(updateLiveTime, 500);
    updateLiveTime();

    // Improved Order ID: random suffix
    function generateOrderId() {
      const base = todayStamp();
      const rand = Math.floor(Math.random()*900)+100; // 100–999
      return `nzuri-${base}-${rand}`;
    }

    // Header compact on hero out of view
    const header = document.getElementById('app-header');
    const hero = document.getElementById('hero');
    const headerObserver = new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){ header.classList.remove('compact'); }
        else{ header.classList.add('compact'); }
      });
    },{root:null,threshold:0.05});
    headerObserver.observe(hero);

    // Delivery segmented toggle (fixed)
    const toggleEl = document.getElementById('delivery-toggle');
    toggleEl.querySelectorAll('.toggle-option').forEach(opt=>{
      opt.addEventListener('click', ()=>{
        toggleEl.querySelectorAll('.toggle-option').forEach(o=>o.classList.remove('active'));
        opt.classList.add('active');
        deliveryMode = opt.dataset.mode;
        document.getElementById('delivery-fee').textContent = deliveryMode==='delivery' ? DELIVERY_FEE : 0;
        document.getElementById('room-field').style.display = deliveryMode==='delivery' ? 'block' : 'none';
        // Keep floating toggle in sync visually
        syncFloatingDeliveryToggle(deliveryMode);
        updateTotals();
      });
    });

    // Floating delivery segmented toggle (added)
    const floatingToggleEl = document.getElementById('floating-delivery-toggle');
    floatingToggleEl.querySelectorAll('.toggle-option').forEach(opt=>{
      opt.addEventListener('click', ()=>{
        floatingToggleEl.querySelectorAll('.toggle-option').forEach(o=>o.classList.remove('active'));
        opt.classList.add('active');
        deliveryMode = opt.dataset.mode;
        document.getElementById('floating-delivery-fee').textContent = deliveryMode==='delivery' ? DELIVERY_FEE : 0;
        document.getElementById('floating-room-field').style.display = deliveryMode==='delivery' ? 'block' : 'none';
        // Sync fixed toggle visually
        syncFixedDeliveryToggle(deliveryMode);
        updateTotals();
      });
    });

    function syncFloatingDeliveryToggle(mode){
      floatingToggleEl.querySelectorAll('.toggle-option').forEach(o=>{
        o.classList.toggle('active', o.dataset.mode===mode);
      });
      document.getElementById('floating-room-field').style.display = mode==='delivery' ? 'block' : 'none';
      document.getElementById('floating-delivery-fee').textContent = mode==='delivery' ? DELIVERY_FEE : 0;
    }
    function syncFixedDeliveryToggle(mode){
      toggleEl.querySelectorAll('.toggle-option').forEach(o=>{
        o.classList.toggle('active', o.dataset.mode===mode);
      });
      document.getElementById('room-field').style.display = mode==='delivery' ? 'block' : 'none';
      document.getElementById('delivery-fee').textContent = mode==='delivery' ? DELIVERY_FEE : 0;
    }

    // Order hours enforcement
    function withinHours() {
      const d = new Date();
      const h = d.getHours();
      return h >= 8 && h < 21; // 08:00–21:00
    }
    function updateCheckoutButton() {
      const btns = document.querySelectorAll('.checkout-btn');
      btns.forEach(btn=>{
        if(!withinHours()) {
          btn.disabled = true;
          btn.textContent = "Closed (08:00–21:00)";
        } else {
          btn.disabled = false;
          btn.textContent = "Order via WhatsApp";
        }
      });
    }
    setInterval(updateCheckoutButton, 60000);
    updateCheckoutButton();

    // Category tab highlighting
    const sections = Array.from(document.querySelectorAll('section[id]'));
    const navLinks = Array.from(document.querySelectorAll('.categories a'));
    function activateTab(id){
      navLinks.forEach(link => link.classList.remove('active'));
      const activeLink = document.querySelector(`.categories a[href="#${id}"]`);
      if(activeLink) activeLink.classList.add('active');
    }
    function onScrollActivate(){
      const offset = 120;
      let currentId = sections[0]?.id || 'kotas';
      for(const sec of sections){
        const rect = sec.getBoundingClientRect();
        if(rect.top <= offset && rect.bottom > offset){
          currentId = sec.id;
          break;
        }
      }
      activateTab(currentId);
    }
    window.addEventListener('scroll', onScrollActivate, { passive:true });
    navLinks.forEach(link=>{
      link.addEventListener('click', ()=>{
        navLinks.forEach(l=>l.classList.remove('active'));
        link.classList.add('active');
      });
    });

    // Cart persistence
    function saveCart() {
      try { localStorage.setItem('nzuriCart', JSON.stringify(cart)); } catch(e){}
    }
    function loadCart() {
      try {
        const saved = localStorage.getItem('nzuriCart');
        if(saved) cart = JSON.parse(saved) || [];
      } catch(e){}
    }
    loadCart();

    // Update header badge
    function updateHeaderBadge(animate=false){
      const count = cart.reduce((sum,l)=>sum+l.qty,0);
      const badge = document.getElementById('cart-count');
      badge.textContent = count;
      if(animate){
        badge.classList.remove('bump');
        void badge.offsetWidth;
        badge.classList.add('bump');
      }
    }

    // Cart preview (last 3 items)
    function updateCartPreview() {
      const preview = document.getElementById('cart-preview');
      if(!preview) return;
      if(cart.length === 0) {
        preview.innerHTML = "<em>Cart is empty</em>";
        return;
      }
      const lastItems = cart.slice(-3).map(l => `${l.item} ×${l.qty}`).join('<br>');
      preview.innerHTML = lastItems;
    }

    // Totals helpers
    function getSubtotal(){
      return cart.reduce((sum,l)=>sum + l.price*l.qty, 0);
    }
    function updateTotals(){
      const subtotal = getSubtotal();
      const tipValFixed = parseFloat(document.getElementById('tip')?.value || 0) || 0;
      const tipValFloating = parseFloat(document.getElementById('floating-tip')?.value || 0) || 0;
      // Use whichever panel user last edited: prefer floating if open
      const effectiveTip = document.getElementById('floating-cart-panel').classList.contains('expanded') ? tipValFloating : tipValFixed;
      const delFee = deliveryMode==='delivery' ? DELIVERY_FEE : 0;
      const total = subtotal + delFee + effectiveTip;

      const subEl = document.getElementById('subtotal');
      const delEl = document.getElementById('delivery-fee');
      const totEl = document.getElementById('total');
      if(subEl) subEl.textContent = Math.round(subtotal);
      if(delEl) delEl.textContent = delFee;
      if(totEl) totEl.textContent = Math.round(total);

      // Mirror into floating panel
      const fSub = document.getElementById('floating-subtotal');
      const fDel = document.getElementById('floating-delivery-fee');
      const fTot = document.getElementById('floating-total');
      if(fSub) fSub.textContent = Math.round(subtotal);
      if(fDel) fDel.textContent = delFee;
      if(fTot) fTot.textContent = Math.round(total);
    }

    // Clear cart modal
    function openClearModal(){
      const modal = document.getElementById('clear-modal');
      modal.setAttribute('aria-hidden','false');
    }
    function closeClearModal(){
      const modal = document.getElementById('clear-modal');
      modal.setAttribute('aria-hidden','true');
    }
    document.getElementById('confirm-clear').addEventListener('click', ()=>{
      cart = [];
      saveCart();
      renderCart(true);
      closeClearModal();
    });
    document.getElementById('cancel-clear').addEventListener('click', closeClearModal);

    // Item cards logic
    document.querySelectorAll('.card').forEach(card=>{
      const item = card.dataset.item;
      const price = parseFloat(card.dataset.price);

      const subBtn = card.querySelector('.btn-sub');
      const addBtn = card.querySelector('.btn-add');
      const qtyDisplay = card.querySelector('.qty-display');
      const options = card.querySelector('.options');
      const addCartBtn = card.querySelector('.add-btn');

      let qty = 0;

      function showConfig(show){
        if(options){ options.style.display = show ? 'block' : 'none'; }
        if(addCartBtn){ addCartBtn.style.display = show ? 'inline-block' : 'none'; }
      }

      subBtn.addEventListener('click', ()=>{
        if(qty>0){ qty--; qtyDisplay.textContent = qty; }
        if(qty===0){ showConfig(false); }
      });

      addBtn.addEventListener('click', ()=>{
        qty++; qtyDisplay.textContent = qty;
        if(qty>0){ showConfig(true); }
      });

      if(options){
        options.querySelectorAll('.chip').forEach(chip=>{
          chip.addEventListener('click', ()=>chip.classList.toggle('active'));
        });
      }

      if(addCartBtn){
        addCartBtn.addEventListener('click', ()=>{
          if(qty<=0) return;

          const cfg = { seasoning:[], sauce:[], fishSeasoning:[] };
          if(options){
            options.querySelectorAll('.chips').forEach(group=>{
              const type = group.dataset.type;
              const selected = Array.from(group.querySelectorAll('.chip.active')).map(c=>c.textContent);
              if(type==='seasoning') cfg.seasoning = selected;
              if(type==='sauce') cfg.sauce = selected;
              if(type==='fish-seasoning') cfg.fishSeasoning = selected;
            });
          }

          cart.push({ item, price, qty, options: cfg });

          // Fly image animation toward cart badge
          const img = card.querySelector('img');
          const badge = document.getElementById('cart-count');
          if(img && badge){
            const rect = img.getBoundingClientRect();
            const badgeRect = badge.getBoundingClientRect();
            const clone = img.cloneNode(true);
            clone.classList.add('fly-img');
            clone.style.top = rect.top + 'px';
            clone.style.left = rect.left + 'px';
            clone.style.width = rect.width + 'px';
            document.body.appendChild(clone);
            requestAnimationFrame(()=>{
              const dx = (badgeRect.left + badgeRect.width/2) - (rect.left + rect.width/2);
              const dy = (badgeRect.top + badgeRect.height/2) - (rect.top + rect.height/2);
              clone.style.transform = `translate(${dx}px, ${dy}px) scale(0.2)`;
              clone.style.opacity = '0';
            });
            clone.addEventListener('transitionend', ()=>clone.remove());
          }

          // Reset local state
          qty = 0; qtyDisplay.textContent = 0;
          showConfig(false);
          if(options){ options.querySelectorAll('.chip.active').forEach(c=>c.classList.remove('active')); }

          renderCart(true);
          // Pulse floating toggle to suggest quick checkout
          floatingToggle.classList.add('pulse');
          setTimeout(()=>floatingToggle.classList.remove('pulse'), 3000);
        });
      }
    });

    // Render cart
    function renderCart(animateBadge=false){
      const itemsDiv = document.getElementById('cart-items');
      itemsDiv.innerHTML = '';

      if(cart.length===0){
        itemsDiv.innerHTML = '<div class="tag" style="color:#a8b0bd">Your cart is empty. Add items with +, configure, then “Add to cart”.</div>';
      } else {
        cart.forEach((line, idx)=>{
          const lineTotal = line.price * line.qty;
          const opts = [];
          if(line.options.fishSeasoning?.length) opts.push(`Fish: ${line.options.fishSeasoning.join(', ')}`);
          if(line.options.seasoning?.length) opts.push(`Seasoning: ${line.options.seasoning.join(', ')}`);
          if(line.options.sauce?.length) opts.push(`Sauce: ${line.options.sauce.join(', ')}`);
          const variantText = opts.length ? `(${opts.join(' • ')})` : '';

          const row = document.createElement('div');
          row.className = 'cart-item';
          row.innerHTML = `
            <div>${line.item} ×${line.qty} <span class="variant">${variantText}</span></div>
            <div class="line-total">R${lineTotal}</div>
            <div style="display:flex;gap:6px;">
              <button class="remove-one" data-index="${idx}" aria-label="Remove one">Remove 1</button>
              ${line.qty>1 ? '<button class="remove-all" data-index="'+idx+'" aria-label="Remove all">Clear all</button>' : ''}
            </div>
          `;

          row.querySelector('.remove-one').addEventListener('click', (e)=>{
            const i = parseInt(e.currentTarget.dataset.index,10);
            cart[i].qty -= 1;
            if(cart[i].qty<=0){ cart.splice(i,1); }
            renderCart(true);
          });

          const clearAllBtn = row.querySelector('.remove-all');
          if(clearAllBtn){
            clearAllBtn.addEventListener('click', (e)=>{
              const i = parseInt(e.currentTarget.dataset.index,10);
              cart.splice(i,1);
              renderCart(true);
            });
          }

          itemsDiv.appendChild(row);
        });
      }

      document.getElementById('order-number').textContent = generateOrderId();

      updateTotals();
      updateHeaderBadge(animateBadge);

      saveCart();
      updateCartPreview();

      updateCheckoutButton();

      // Mirror into floating panel and REBIND buttons for floating cart
      const floatingItemsDiv = document.getElementById('floating-cart-items');
      if(floatingItemsDiv){
        floatingItemsDiv.innerHTML = itemsDiv.innerHTML;

        // Bind floating remove-one
        floatingItemsDiv.querySelectorAll('.remove-one').forEach(btn=>{
          btn.addEventListener('click', (e)=>{
            const i = parseInt(e.currentTarget.dataset.index,10);
            cart[i].qty -= 1;
            if(cart[i].qty<=0){ cart.splice(i,1); }
            renderCart(true);
          });
        });
        // Bind floating remove-all
        floatingItemsDiv.querySelectorAll('.remove-all').forEach(btn=>{
          btn.addEventListener('click', (e)=>{
            const i = parseInt(e.currentTarget.dataset.index,10);
            cart.splice(i,1);
            renderCart(true);
          });
        });
      }
    }

    // Checkout
    function sanitize(str){ return String(str || '').replace(/[<>]/g,'').trim(); }

    function checkout(){
      const btn = document.querySelector('.checkout-btn');
      if(btn && btn.disabled){ alert('We are currently closed. Please order between 08:00 and 21:00.'); return; }
      if(cart.length===0){ alert('Your cart is empty.'); return; }

      // Read fields from whichever panel the user is using: prefer floating if expanded
      const useFloating = document.getElementById('floating-cart-panel').classList.contains('expanded');

      const name = sanitize((useFloating ? document.getElementById('floating-name') : document.getElementById('name')).value);
      const phone = sanitize((useFloating ? document.getElementById('floating-phone') : document.getElementById('phone')).value);
      const tipVal = parseFloat((useFloating ? document.getElementById('floating-tip') : document.getElementById('tip')).value || 0) || 0;

      if(deliveryMode==='delivery'){
        const roomInput = useFloating ? document.getElementById('floating-room') : document.getElementById('room');
        const room = sanitize(roomInput.value);
        if(room.length===0){ alert('Please enter your Ekhaya Junction room number for delivery.'); return; }
      }

      const orderId = document.getElementById('order-number').textContent;
      const subtotal = getSubtotal();
      const delFee = deliveryMode==='delivery' ? DELIVERY_FEE : 0;
      const total = subtotal + delFee + tipVal;

      const lines = [];
      lines.push(`Order ID: ${orderId}`);
      lines.push(`Name: ${name || '—'}`);
      lines.push(`Phone: ${phone || '—'}`);
      lines.push(`Mode: ${deliveryMode==='delivery' ? 'Delivery (Ekhaya Junction only, R7)' : 'Collection at Nzuri Café (Ekhaya Junction)'}`);
      if(deliveryMode==='delivery'){
        const roomText = sanitize((useFloating ? document.getElementById('floating-room') : document.getElementById('room')).value);
        lines.push(`Room: ${roomText}`);
      }
      lines.push('');
      lines.push('Items:');
      cart.forEach(l=>{
        const opts = [];
        if(l.options.fishSeasoning?.length) opts.push(`Fish: ${l.options.fishSeasoning.join(', ')}`);
        if(l.options.seasoning?.length) opts.push(`Seasoning: ${l.options.seasoning.join(', ')}`);
        if(l.options.sauce?.length) opts.push(`Sauce: ${l.options.sauce.join(', ')}`);
        const variant = opts.length ? ` (${opts.join(' • ')})` : '';
        lines.push(`• ${l.item} ×${l.qty}${variant} — R${l.price*l.qty}`);
      });
      lines.push('');
      lines.push(`Subtotal: R${Math.round(subtotal)}`);
      lines.push(`Delivery fee: R${delFee}`);
      lines.push(`Tip: R${Math.round(tipVal)}`);
      lines.push(`Total: R${Math.round(total)}`);
      lines.push('');
      lines.push('Payment: Cash or digital on delivery/collection.');
      lines.push('Location: Nzuri Café, Ekhaya Junction Residence, TUT Campus.');
      lines.push('Thank you!');

      const msg = encodeURIComponent(lines.join('\n'));
      const waUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
      window.location.href = waUrl;
    }

    // Initialize
    function init(){
      document.getElementById('order-number').textContent = generateOrderId();
      const tipEl = document.getElementById('tip');
      if(tipEl) tipEl.addEventListener('input', updateTotals);
      const floatingTipEl = document.getElementById('floating-tip');
      if(floatingTipEl) floatingTipEl.addEventListener('input', updateTotals);

      // Activate first tab initially
      const firstSection = document.querySelector('section[id]');
      if(firstSection) activateTab(firstSection.id);
      onScrollActivate();
      renderCart(false);
    }
    init();

    // Floating cart toggle + panel behavior
    const floatingToggle = document.getElementById('floating-cart-toggle');
    const floatingPanel = document.getElementById('floating-cart-panel');
    const closeFloatingCart = document.getElementById('close-floating-cart');
    const fixedCart = document.getElementById('cart');

    // Expand floating cart anywhere
    floatingToggle.addEventListener('click', ()=>{
      floatingPanel.classList.add('expanded');
    });

    // Close floating cart
    closeFloatingCart.addEventListener('click', ()=>{
      floatingPanel.classList.remove('expanded');
    });

    // Auto-hide floating toggle and collapse panel when fixed cart is visible
    const cartObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          floatingToggle.classList.add('hidden');
          floatingPanel.classList.remove('expanded');
        } else {
          floatingToggle.classList.remove('hidden');
        }
      });
    }, { threshold: 0.2 });
    cartObserver.observe(fixedCart);
  </script>
</body>
</html>
```